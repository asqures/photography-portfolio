<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jordan T. Prodanoff - Portfolio</title>
  <meta name="description" content="Hi there!">
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="dist/assets/favicon.ico" />
  <link rel="stylesheet" href="dist/output.css" />
  <link rel="stylesheet" href="styles.css" />
  <!-- Alpine.js -->
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Signika:wght@400;700&display=swap" rel="stylesheet">
  <!-- Fancybox -->
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css" />
  <!-- Justifiedâ€‘Gallery CSS (unused) -->
  <!-- Masonry & imagesLoaded (unused) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      content: ["./dist/*.{html,js}"],
      theme: {
        extend: {
          fontFamily: {
            'nothingyoucoulddo': ['Nothing You Could Do', 'cursive'],
            'signika': ['Signika', 'sans-serif'],
          },
          animation: {
            'fade-in': 'fade-in 0.5s ease-in-out forwards'
          },
          keyframes: {
            'fade-in': {
              '0%': { opacity: '0' },
              '100%': { opacity: '1' }
            }
          }
        }
      },
      plugins: []
    }
  </script>
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  <style>
    /* Gallery container */
    #gallery { width: 100%; }
    #gallery .row {
      display: flex;
      margin-bottom: 16px;
    }
    #gallery .row a {
      display: block;
      margin-right: 16px;
    }
    #gallery .row a:last-child {
      margin-right: 0;
    }
  </style>
</head>

<body class="dark:bg-black bg-white h-screen text-black dark:text-white px-5 md:px-20 opacity-0 animate-fade-in">
  <!-- Navbar -->
  <header class="flex w-full pt-10 pb-1">
    <nav id="nav" x-data="{ open: false }" role="navigation" class="w-full">
      <div class="container mx-auto flex items-center">
        <div class="mr-8">
          <a href="index.html" class="text-2xl font-signika font-bold">JORDAN T. PRODANOFF</a>
        </div>
        <div class="ml-auto md:hidden flex items-center">
          <button @click="open = !open" onclick="menuToggle()" class="text-black dark:text-white w-5 h-5 focus:outline-none">
            <span class="sr-only">Open main menu</span>
            <div class="relative w-5 h-5 mx-auto">
              <span :class="{'rotate-45': open, '-translate-y-1.5': !open }" class="block absolute h-0.5 w-5 bg-current transition"></span>
              <span :class="{'opacity-0': open }" class="block absolute h-0.5 w-5 bg-current transition"></span>
              <span :class="{'-rotate-45': open, 'translate-y-1.5': !open }" class="block absolute h-0.5 w-5 bg-current transition"></span>
            </div>
          </button>
        </div>
        <div id="menu" class="w-full h-0 md:w-auto md:flex md:items-center transition-all duration-500" :class="{ 'h-auto': open }">
          <ul class="flex flex-col md:flex-row md:space-x-5 mt-5 md:mt-0">
            <li><a href="index.html" class="font-signika text-2xl">PORTFOLIO</a></li>
            <li><a href="dist/about_me.html" class="font-signika text-2xl">ABOUT ME</a></li>
            <li><a href="dist/contact.html" class="font-signika text-2xl">CONTACT</a></li>
          </ul>
        </div>
      </div>
    </nav>
  </header>

  <!-- Gallery -->
  <section id="gallery"></section>

  <!-- Scripts -->
  <!-- Inline fade-in fallback -->
  <script>
    window.addEventListener('load', () => {
      document.body.classList.remove('opacity-0');
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/imagesloaded@5/imagesloaded.pkgd.min.js"></script>
  <script>
    (function() {
      const GUTTER = 16;
      const PER_ROW = 3;
      const gallery = document.getElementById('gallery');

      fetch('./gallery.json')
        .then(r => r.ok ? r.json() : Promise.reject('Gallery JSON not found'))
        .then(({ images }) => {
          const imgElems = images.map(({ src, alt }) => {
            const img = new Image();
            img.src = src;
            img.alt = alt || '';
            return img;
          });
          imagesLoaded(imgElems, () => makeRows(imgElems));
          window.addEventListener('resize', () => imagesLoaded(imgElems, () => makeRows(imgElems)));
        })
        .catch(err => console.error(err));

      function makeRows(imgElems) {
        gallery.innerHTML = '';
        const cw = gallery.clientWidth;
        for (let i = 0; i < imgElems.length; i += PER_ROW) {
          const chunk = imgElems.slice(i, i + PER_ROW);
          renderRow(chunk, cw);
        }
      }

      function renderRow(imgs, rowWidth) {
        const ratios = imgs.map(img => img.naturalWidth / img.naturalHeight);
        const totalR = ratios.reduce((a, b) => a + b, 0);
        const H = (rowWidth - GUTTER * (imgs.length - 1)) / totalR;

        const rowDiv = document.createElement('div');
        rowDiv.className = 'row';
        rowDiv.style.marginBottom = GUTTER + 'px';
        gallery.appendChild(rowDiv);

        let used = 0;
        ratios.forEach((r, idx) => {
          let W = Math.floor(r * H);
          if (idx === ratios.length - 1) {
            W = rowWidth - used - GUTTER * (imgs.length - 1);
          }
          const img = imgs[idx];
          img.style.width = W + 'px';
          img.style.height = H + 'px';

          const a = document.createElement('a');
          a.href = img.src;
          a.dataset.fancybox = 'gallery';
          a.appendChild(img);
          if (idx < imgs.length - 1) a.style.marginRight = GUTTER + 'px';
          rowDiv.appendChild(a);

          used += W;
        });
      }
    })();
  </script>
  <script src="dist/menu.js"></script>
  <!-- Fancybox init -->
  <script>Fancybox.bind("[data-fancybox]", {});</script>

  <!-- Footer -->
  <footer>
    <div class="max-w-screen-xl py-16 mx-auto text-center">
      <p class="font-signika"><strong>JORDAN T. PRODANOFF</strong></p>
      <p class="mt-4 text-sm text-gray-600 dark:text-gray-300">
        <!-- address -->
      </p>
    </div>
  </footer>
</body>

</html>
